<%
  # Set meta tags for contact page
  set_meta_tags(
    title: "Contact Us - DrillCrew",
    description: "Get in touch with DrillCrew. Contact our team for questions about job postings, applications, or general inquiries about drilling & mining and oil & gas careers.",
    url: contact_url
  )
%>

<div class="min-h-screen bg-amber-50 py-12">
  <div class="max-w-2xl mx-auto px-5 sm:px-5 lg:px-12">
    <!-- Header -->
    <div class="text-center mb-12">
      <h1 class="text-3xl font-bold text-amber-900 mb-4">Contact Us</h1>
      <p class="text-lg text-amber-700">Get in touch with our team</p>
    </div>

    <!-- Contact Form Card -->
    <div class="bg-white rounded-lg shadow-xl p-12">
      <% anti_bot_seed = rand(1000) %>
      <div data-controller="anti-bot"
           data-anti-bot-seed-value="<%= anti_bot_seed %>"
           data-anti-bot-multiplier-value="11"
           data-anti-bot-offset-value="34">
        <%= form_with model: @contact, url: contact_path, local: true, class: "space-y-6", id: 'contact-form' do |form| %>
          <!-- Anti-bot hidden fields -->
          <%= form.hidden_field :anti_bot_token, data: { anti_bot_target: "hiddenField" } %>
          <%= form.hidden_field :anti_bot_seed, value: anti_bot_seed %>

          <div style="position: absolute; left: -9999px; opacity: 0; pointer-events: none;" aria-hidden="true">
            <%= form.text_field :given_name, tabindex: "-1", autocomplete: "new-password" %>
            <%= form.text_field :family_name, tabindex: "-1", autocomplete: "new-password"%>
          </div>

          <% if @contact.errors.any? %>
            <div id="error_explanation" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative">
              <h2 class="font-bold mb-2"><%= pluralize(@contact.errors.count, "error") %> prohibited this message from being sent:</h2>
              <ul class="list-disc pl-5">
                <% @contact.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
                <% end %>
              </ul>
            </div>
          <% end %>

          <div>
            <%= form.label :email, "Your Email", class: "block text-sm font-medium text-amber-900" %>
            <%= form.email_field :email, required: true, class: "mt-1 p-1 block w-full rounded-md border border-amber-300 shadow-sm focus:border-amber-500 focus:ring focus:ring-amber-500 focus:ring-opacity-50" %>
          </div>

          <div>
            <%= form.label :message, "Your Message", class: "block text-sm font-medium text-amber-900" %>
            <%= form.text_area :message, required: true, rows: 6, class: "mt-1 p-1 block w-full rounded-md border border-amber-300 shadow-sm focus:border-amber-500 focus:ring focus:ring-amber-500 focus:ring-opacity-50" %>
          </div>

          <div class="pt-4">
            <%= form.submit "Send Message", class: "w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-6 rounded-md transition duration-300 ease-in-out transform hover:scale-105 shadow-lg" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
