<tr class="border-t <%= job_offer.expired? ? 'bg-gray-200 text-gray-500' : '' %>" id="job_offer_<%= job_offer.id %>">
  <td class="px-4 py-2">
    <%= link_to job_offer.title, job_offer_path(job_offer), class: 'text-amber-700 hover:underline font-semibold', target: '_blank' %>
    <% if job_offer.expired? %>
      <span class="ml-2 inline-block px-2 py-1 text-xs font-semibold text-white bg-red-500 rounded">Expired <%= time_tag job_offer.expires_at, nil,
                                                                                                                         class: "local-time",
                                                                                                                         datetime: job_offer.expires_at.iso8601 %></span>
    <% elsif order_placement&.paid_on.present? %>
      <span class="ml-2 text-xs text-amber-600">Paid: <%= time_tag job_offer.expires_at, nil,
                                                                   class: "local-time",
                                                                   datetime: order_placement.paid_on.iso8601 %></span>
      <span class="ml-2 text-xs text-amber-600">Expires at: <%= time_tag job_offer.expires_at, nil,
                                                                         class: "local-time",
                                                                         datetime: job_offer.expires_at.iso8601 %></span>
    <% end %>
  </td>
  <td class="px-4 py-2">
      <%= link_to 'Download', order_placement.invoice_url, target: '_blank', rel: 'noopener noreferrer', class: 'text-amber-600 hover:underline' %>
  </td>
  <td class="px-4 py-2 space-x-2">
    <% if job_offer.expired? %>
    <span class="text-gray-400"><%=  link_to 'Show', job_offer_path(job_offer), class: 'text-amber-600 hover:underline'  %></span>
    <%  else  %>
    <%= link_to 'Edit', edit_job_offer_path(job_offer), class: 'text-amber-600 hover:underline' %>
    <%=  button_to 'Expire', job_offer_path(job_offer), method: :delete, data: { turbo_confirm: 'Are you sure? The offer will be no longer visible on the main page and you will be not able to receive CVs.', turbo_frame: "job_offer_#{job_offer.id}" }, class: 'text-red-600 hover:underline cursor-pointer'  %>
    <%  end %>
  </td>
</tr>
<!--
<script>
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('time.local-time').forEach(function(el) {
      var dt = el.getAttribute('datetime');
      if (dt) {
        var date = new Date(dt);
        // Format as YYYY-MM-DD HH:mm in local time
        var formatted = date.getFullYear() + '-' +
          String(date.getMonth() + 1).padStart(2, '0') + '-' +
          String(date.getDate()).padStart(2, '0') + ' ' +
          String(date.getHours()).padStart(2, '0') + ':' +
          String(date.getMinutes()).padStart(2, '0');
        el.textContent = formatted;
      }
    });
  });
</script>
-->