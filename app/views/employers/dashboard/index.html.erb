<div class="max-w-7xl mx-auto mt-16 flex" data-controller="tabs" data-tabs-initial-tab="job_offers">
  <aside class="w-1/4 pr-6">
    <nav class="space-y-2">
      <button type="button" data-action="click->tabs#show" data-tabs-target="tab" data-tab-name="job_offers" class="w-full text-left px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200">Job Offers</button>

      <button type="button" data-action="click->tabs#show" data-tabs-target="tab" data-tab-name="password" class="w-full text-left px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200">Password</button>
      <button type="button" data-action="click->tabs#show" data-tabs-target="tab" data-tab-name="billing" class="w-full text-left px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200">Billing</button>
      <button type="button" data-action="click->tabs#show" data-tabs-target="tab" data-tab-name="close_account" class="w-full text-left px-4 py-2 rounded-md text-red-600 hover:bg-red-100">Close Account</button>
    </nav>
  </aside>
  <div class="flex-1 bg-white p-6 rounded-lg shadow">
    <!-- Job Offers Pane -->
    <div data-tabs-target="pane" data-tab-name="job_offers" class="hidden">
      <h2 class="text-2xl font-semibold mb-4">Your Job Offers</h2>
      <table class="w-full text-left border-collapse">
        <thead>
        <tr class="bg-gray-100">
          <th class="px-4 py-2">Title</th>
          <th class="px-4 py-2">Actions</th>
        </tr>
        </thead>
        <tbody>
        <% current_employer.job_offers.each do |offer| %>
          <tr class="border-t">
            <td class="px-4 py-2"><%= offer.title %></td>
            <td class="px-4 py-2 space-x-2">
              <%= link_to 'Edit', edit_job_offer_path(offer), class: 'text-blue-600 hover:underline' %>
              <%= button_to 'Remove', employers_job_offer_path(offer), method: :delete, data: { confirm: 'Are you sure?' }, class: 'text-red-600 hover:underline' %>
            </td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
    <!-- Password Pane -->
    <div data-tabs-target="pane" data-tab-name="password">
      <h2 class="text-2xl font-semibold mb-4">Set New Password</h2>
      <%= form_with model: current_employer, url: update_password_employers_path, method: :patch, local: true do |f| %>
        <div class="mb-4">
          <%= f.label :password, 'New Password', class: 'block text-gray-700' %>
          <%= f.password_field :password, required: true, class: 'mt-1 w-full border border-gray-300 rounded-md p-2' %>
        </div>
        <div class="mb-4">
          <%= f.label :password_confirmation, 'Confirm Password', class: 'block text-gray-700' %>
          <%= f.password_field :password_confirmation, required: true, class: 'mt-1 w-full border border-gray-300 rounded-md p-2' %>
        </div>
        <%= f.submit 'Update Password', class: 'px-6 py-2 bg-amber-900 text-white rounded-md hover:bg-amber-800' %>
      <% end %>
    </div>

    <!-- Billing Pane -->
    <div data-tabs-target="pane" data-tab-name="billing" class="hidden">
      <h2 class="text-2xl font-semibold mb-4">Billing Details</h2>
      <%= form_with model: (current_employer.billing_detail || current_employer.build_billing_detail), url: update_billing_employers_path, method: :patch, local: true do |f| %>
        <% ['company_name','tax_id','address','city','zip','country'].each do |attr| %>
          <div class="mb-4">
            <%= f.label attr.to_sym, attr.humanize, class: 'block text-gray-700' %>
            <%= f.text_field attr.to_sym, class: 'mt-1 w-full border border-gray-300 rounded-md p-2' %>
          </div>
        <% end %>
        <%= f.submit 'Save Billing', class: 'px-6 py-2 bg-amber-900 text-white rounded-md hover:bg-amber-800' %>
      <% end %>
    </div>
    <!-- Close Account Pane -->
    <div data-tabs-target="pane" data-tab-name="close_account" class="hidden">
      <h2 class="text-2xl font-semibold mb-4 text-red-600">Close Account</h2>
      <p class="mb-4 text-gray-700">This will permanently delete your account and all associated data.</p>
      <%= button_to 'Close My Account', close_account_employers_path, method: :delete, data: { confirm: 'Are you absolutely sure?' }, class: 'px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-500' %>
    </div>
  </div>
</div>

